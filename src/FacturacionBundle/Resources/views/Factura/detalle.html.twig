{% extends '::base.html.twig' %}
{% block content %}
    <div id="wrapper">
        <div id="page-wrapper">
            <div class="row">
                <div class="col-md-4">
                    <h1 class="page-header">Facturas</h1>
                </div> 


            </div>
            <section class="content"> 
                {{ form_start(form, { 'attr': {'class': 'form-horizontal', 'novalidate': 'novalidate'} }) }}
                <div class="panel panel-default">
                    <div class="panel-heading">Informaci√≥n</div>
                    <div class="panel-body">
                        <table width="90%" class="table table-responsive table-bordered">
                            <tr>
                                <td>Numero:</td>
                                <td class="td-in-well">{{ arFactura.numeroDocumento }}</td>
                                <td>Fecha:</td>
                                <td class="td-in-well">{{ arFactura.fechaMovimiento |date("Y/m/d") }}</td>
                                <td >Sub-total:</td>
                                <td align="right">{{ arFactura.valorSubtotal | number_format(0, '.', ',')}}</td>
                            </tr>
                            <tr>
                                <td>Comprobante:</td>
                                <td class="td-in-well">{{ arFactura.comprobanteRel.nombreComprobante }}</td>
                                <td>Vence:</td>
                                <td class="td-in-well">{{ arFactura.fechaVencimiento |date("Y/m/d") }}</td>                       
                                <td>Base Gravable:</td>
                                <td align="right"></td>
                            </tr>

                            <tr>
                                <td></td>
                                <td class="td-in-well"></td>
                                <td>Plazo pago:</td>
                                <td class="td-in-well"></td>
                                <td>Iva:</td>
                                <td align="right">{{ arFactura.valorIva | number_format(0, '.', ',')}}</td>
                            </tr>
                            <tr>
                                <td></td>
                                <td class="td-in-well"></td>
                                <td></td>
                                <td class="td-in-well"></td>                       
                                <td>ReteIva:</td>
                                <td align="right">{{ arFactura.valorReteIva | number_format(0, '.', ',')}}</td>                    

                            </tr>
                            <tr>
                                <td>Cliente:</td>
                                <td class="td-in-well">{{ arFactura.clienteRel.primerNombre }}</td>
                                <td>Usuario:</td>
                                <td class="td-in-well"></td> 
                                <td>ReteFte:</td>
                                <td align="right">{{ arFactura.valorReteFuente | number_format(0, '.', ',')}}</td>                      
                            </tr>
                            <tr>
                                <td>Observacion:</td>
                                <td class="td-in-well"></td>
                                <td>Tipo Impresion:</td>
                                <td class="td-in-well"></td> 
                                <td>Rete Renta:</td>
                                <td align="right"></td>
                            </tr>                
                        </table>
                    </div>
                </div>
            </section>
            {{ form_start(form, { 'attr': {'class': 'form-horizontal'} }) }}
            <section class="content"> 
                <div class="panel panel-default">
                    <div class="panel-heading">Datos articulo</div>
                    <div class="panel-body">
                        <div class="table-responsive">
                            <table class="table table-responsive table-bordered">
                                <tr>
                                    <td>Codigo:</td>
                                    <td>Bodega</td>
                                    <td>UND</td>
                                    <td>Cantidad</td>
                                    <td>Valor Unitario</td>
                                    <td>% Dscto</td>
                                    <td>Sub-Total unitario</td>
                                    <td>% iva</td>
                                    <td>Neto unitario</td>

                                </tr>
                                <tr>
                                    <td class="col-md-3">
                                        <input id="TxtCodigoArticulo"  name="TxtCodigoArticulo[]"  type="text"  value="{{ arFacturaDetalle.articuloRel.codigoArticuloPk | default('')}}" required="true"/>
                                        <a class="btn btn-default btn-sm" href="javascript:abrirVentana3('{{ path('buscar_articulo', { 'campoCodigo': 'TxtCodigoArticulo', 'campoNombre': 'TxtNombreArticulo' }) }}', 'buscarItem', 600, 900)">...</a>
                                    </td>
                                    <td><input name="TxtBodega[]" type="choice_label" value="" /></td>
                                    <td align="center"><input name="UndManejo[]" value="{{ arArticulo.codigoUnidadManejoFk }}" readOnly="ReadOnly"/></td>
                                    <td align="center"><input name="TxtCantidad[]" type="number" value="{{ arFacturaDetalle.cantidad | default('') }}" /></td>
                                    <td><input name="VrUnitario[]" type="number" value="{{ arFacturaDetalle.vrUnitario | default('')}}"/></td>
                                    <td><input name="Dscto[]" type="number" value="{{arFacturaDetalle.dscto | default('')}}"/></td>
                                    <td><input name="SubTotalUnitario[]" type="number" value="{{arFacturaDetalle.sunTotalUnitario | default('')}}"/></td>
                                    <td><input name="iva[]" type="number" value="{{arFacturaDetalle.iva | default('')}}"/></td>
                                    <td><input name="TotalNeto[]" type="number" value="{{arFacturaDetalle.totalNeto | default('')}}"/></td>
                                </tr>
                                <tr>
                                    <td class="col-md-1">
                                        <input id="TxtNombreArticulo"  name="TxtNombreArticulo"  type="text" value="{{ arCliente.clienteRel.primerNombre | default('') }}" readOnly="ReadOnly" />
                                    </td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                            </table>
                            {{form_widget(form.BtnActualizarArticulo)}}
                        </div>
                    </div>
                </div>
            </section>
            <ul class="nav nav-tabs">
                <li class="active"><a href="#registros" data-toggle="tab">Registros</a></li>
                <li><a href="#imputacion" data-toggle="tab">Imputacion Contable</a></li>
                <li><a href="#saldos" data-toggle="tab">Saldos Factura</a></li>
            </ul>
            <div class="tab-content">

                <div class="tab-pane active" id="registros">
                    <div id="registros" style="width: 100%"><br>
                        <div class="table-responsive">
                            <table  class="table table-striped table-bordered table-condensed">
                                <tr>
                                    <th>Id</th>
                                    <th>Articulo</th>
                                    <th>Cantidad</th>
                                    <th></th>
                                    <th></th>

                                </tr>
                                {% for arFacturaDetalle in arFacturaDetalle %}
                                    <tr>
                                        <td>{{ arFacturaDetalle.codigoFacturaDetallePk}}<input type="hidden" name="LblCodigo[]" value="{{ arFacturaDetalle.codigoFacturaDetallePk }}"></td>
                                        <td>{{ arFacturaDetalle.articuloRel.nombreArticulo}}</td>
                                        <td>{{ arFacturaDetalle.cantidad }}</td>
                                        <td>{{ form_widget(form.BtnEditar) }}</td>
                                        <td align="center"><input type="checkbox" name="ChkSeleccionar[]" value="{{ arFacturaDetalle.codigoFacturaDetallePk }}" /></td>
                                    </tr>
                                {% endfor%}
                            </table>
                        </div>
                        {% if arFactura.estadoImpreso == 0 %}
                            <div class="btn-group">
                                <a class="btn btn-default btn-sm" href="javascript:abrirVentana3('{{ path('factura_detalle_articulo', {'codigoFactura':arFactura.codigoFacturaPk,'campoCodigo': 'form_TxtCodigoItem', 'campoNombre': 'form_TxtNombreItem' })}}', 'buscarItem', 600, 900)">Buscar Art</a>
                            </div>
                            <div class="btn-group">
                                {{ form_widget(form.BtnEliminarDetalle) }}
                            </div>

                        {% endif %}
                        <div class="btn-group">

                        </div>
                    </div>
                </div>

                <div class="tab-pane" id="imputacion">
                    <!-- Menu Encabezado Movimiento -->
                    <div id="imputacion" style="width: 100%"><br>
                        <table  class="table table-striped table-bordered table-condensed table-hover">
                            <tr>
                                <th>C√ìDIGO</th>
                                <th>NOMBRE</th>
                                <th></th>
                                <th></th>
                            </tr>

                        </table> 
                    </div>
                </div>
            </div>

            {{ form_end(form) }}
        </div>
    </div>
{% endblock %}